{% extends 'frontEnd/html/front_layouts.html' %}
{% load static %}
{% load hotel_info %}

{% block title %}Porzotok || 24 Hour Deals{% endblock  %}


{% block custom_css %}
<style type="text/css">
.min-width-200 {
    min-width: 10rem !important;
}
    
/* Slideshow container */
.slideshow-container {
  max-width: 1000px;
  position: relative;
  margin: auto;
}

/* Next & previous buttons */
.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}


/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}

.fade:not(.show) {
    opacity: 100 !important;
}

@-webkit-keyframes fade {
  from {opacity: .4} 
  to {opacity: .1}
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: .1}
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {
  .prev, .next,.text {font-size: 11px}
}

.isActivate{
    display: block;
}
.isDeactivate{
    display: none;
}
</style>


{% endblock  %}


{% block main_content %}
<!-- ========== MAIN CONTENT ========== -->
<main id="content" role="main" v-cloak>
    <div class="container pt-5 pt-xl-8">
        <div class="row mb-5 mb-lg-8 mt-xl-1">
            <div class="col-lg-4 col-xl-3 order-lg-1 width-md-50">
                <div class="navbar-expand-lg navbar-expand-lg-collapse-block">
                    <button class="btn d-lg-none mb-5 p-0 collapsed" type="button" data-toggle="collapse" data-target="#sidebar" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="far fa-caret-square-down text-primary font-size-20 card-btn-arrow ml-0"></i>
                        <span class="text-primary ml-2">Sidebar</span>
                    </button>
                    <div id="sidebar" class="collapse navbar-collapse">
                        <div class="mb-6 w-100">
                           <!-- accordian top content here -->

                            <div class="sidenav border border-color-8 rounded-xs">
                                <!-- Accordiaon -->
                                <!-- price filter -->
                                


                                <!-- city filter -->
                                <div id="cityCategoryAccordion" class="accordion rounded-0 shadow-none border-top">
                                    <div class="border-0">
                                        <div class="card-collapse" id="cityCategoryHeadingOne">
                                            <h3 class="mb-0">
                                                <button type="button" class="btn btn-link btn-block card-btn py-2 px-5 text-lh-3 collapsed" data-toggle="collapse" data-target="#cityCategoryOne" aria-expanded="false" aria-controls="cityCategoryOne">
                                                    <span class="row align-items-center">
                                                        <span class="col-9">
                                                            <span class="font-weight-bold font-size-17 text-dark mb-3">Room By City</span>
                                                        </span>
                                                        <span class="col-3 text-right">
                                                            <span class="card-btn-arrow">
                                                                <span class="fas fa-chevron-down small"></span>
                                                            </span>
                                                        </span>
                                                    </span>
                                                </button>
                                            </h3>
                                        </div>
                                        <div id="cityCategoryOne" class="collapse show" aria-labelledby="cityCategoryHeadingOne" data-parent="#cityCategoryAccordion">
                                            <div class="card-body pt-0 mt-1 px-5 pb-4">

                                                <div v-for="city in allCitys" class="form-group font-size-14 text-lh-md text-secondary mb-3 flex-center-between">
                                                    <div class="custom-control custom-checkbox">
                                                        <input @change="getHotelByCity" type="checkbox" class="custom-control-input" :id="city.city_id" v-model="citys" :value="city.city_name">
                                                        <label class="custom-control-label" :for="city.city_id">${city.city_name}</label>
                                                    </div>
                                                    <!-- <span>5</span> -->
                                                </div>
                                                <!-- End Checkboxes -->

                                                <!-- View More - Collapse -->
                                                <div class="collapse" id="collapseBrand3">

                                                    <div class="form-group font-size-14 text-lh-md text-secondary mb-3 flex-center-between">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="gucci">
                                                            <label class="custom-control-label" for="gucci">Gucci</label>
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                                <!-- End View More - Collapse -->

                                                <!-- Link -->
                                                <a class="link link-collapse small font-size-1" data-toggle="collapse" href="#collapseBrand3" role="button" aria-expanded="false" aria-controls="collapseBrand3">
                                                  <span class="link-collapse__default font-size-14">Show all</span>
                                                  <span class="link-collapse__active font-size-14">Show less</span>
                                                </a>
                                                <!-- End Link -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- End Accordion -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 col-xl-9 order-md-1 order-lg-2 pb-5 pb-lg-0">
                <!-- Shop-control-bar Title -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="font-size-21 font-weight-bold mb-0 text-lh-1" v-cloak><!-- ${this.filterDataByAttribute.length} --> 24 Hours Deals Room List</h3>
                    <ul class="nav tab-nav-shop flex-nowrap" id="pills-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link font-size-22 p-0 active" id="pills-three-example1-tab" data-toggle="pill" href="#pills-three-example1" role="tab" aria-controls="pills-three-example1" aria-selected="true">
                                <div class="d-md-flex justify-content-md-center align-items-md-center">
                                    <i class="fa fa-list"></i>
                                </div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link font-size-22 p-0 ml-2 " id="pills-one-example1-tab" data-toggle="pill" href="#pills-one-example1" role="tab" aria-controls="pills-one-example1" aria-selected="false">
                                <div class="d-md-flex justify-content-md-center align-items-md-center">
                                    <i class="fa fa-th"></i>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- End shop-control-bar Title -->

                <!-- Slick Tab carousel -->
                <div class="u-slick__tab">
                    <!-- Nav Links -->
                    <div class="mb-5">
                        
                    </div>
                    <!-- End Nav Links -->

                    <!-- Tab Content -->
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-three-example1" role="tabpanel" aria-labelledby="pills-three-example1-tab" data-target-group="groups">
                            <ul class="d-block list-unstyled products-group prodcut-list-view">

                               
                                <li v-for="result in filterDataByAttribute" class="card mb-5 overflow-hidden">
                                    <div class="product-item__outer w-100">
                                        <div class="row">
                                            <div class="col-xl-4">
                                                <div class="product-item__header">
                                                    <div class="position-relative">

                                                        <div class="slideshow-container">

                                                            <div v-for="(img,index) in result.image_url" v-if="index == 0" class="mySlides fade isActivate">
                                                                <a href="#"><img :src="img.Image" :alt="result.hotel_name" style="width:100%; height: 170px;" /></a>
                                                            </div>

                                                            <!-- <a class="prev" @click="plusSlides(-1)">&#10094;</a>
                                                            <a class="next" @click="plusSlides(1)">&#10095;</a> -->

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-5 col-wd-4gdot5 flex-horizontal-center">
                                                <div class="w-100 position-relative m-4 m-md-0">
                                                    <div class="mb-1 pb-1">
                                                        <span class="badge badge-orange text-white rounded-xs font-size-13 py-1 p-xl-2">Limited Time Offer</span>
                                                        <span class="green-lighter ml-2">
                                                            <small class="fas fa-star font-size-10"></small>
                                                            <small class="fas fa-star font-size-10"></small>
                                                            <small class="fas fa-star font-size-10"></small>
                                                            <small class="fas fa-star font-size-10"></small>
                                                            <small class="fas fa-star font-size-10"></small>
                                                        </span>
                                                    </div>

                                                    <div class="position-absolute top-0 right-0 pr-md-3 d-none d-md-block">
                                                        <button type="button" class="btn btn-sm btn-icon rounded-circle" data-toggle="tooltip" data-placement="top" title="" data-original-title="Save for later">
                                                            <span class="flaticon-heart-1 font-size-20"></span>
                                                        </button>
                                                    </div>
                                                    <a :href="'#ontargetModal'+ result.room_id" :data-modal-target="'#ontargetModal'+ result.room_id" data-modal-effect="fadein" class="mb-2 d-inline-block">
                                                        <span class="font-weight-medium font-size-17 text-dark d-flex mb-1">${result.room_name}</span>
                                                    </a>
                                                    <div class="card-body p-0">
                                                        <a href="javascript:" class="d-block mb-3">
                                                            <div class="d-flex flex-wrap flex-xl-nowrap align-items-center font-size-14 text-gray-1">
                                                                <i class="icon flaticon-placeholder mr-2 font-size-20"></i> ${result.hotel_details.city.city_name}, ${result.hotel_details.city.state.country.country_name}
                                                                
                                                            </div>
                                                        </a>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-wd-3gdot5 align-self-center py-4 py-xl-0 border-top border-xl-top-0">
                                                <div class="d-xl-flex flex-wrap border-xl-left ml-4 ml-xl-0 pr-xl-3 pr-wd-5 text-xl-right justify-content-xl-end">
                                                    <div class="mb-0">
                                                        <span class="font-weight-bold">${result.price_details.offer_price} TK</span><span class="font-size-14 text-gray-1"> / night</span>
                                                    </div>

                                                    <div class="mt-5">
                                                        <a @click="directAddToCart(result.room_id);" href="javascript:" class="btn btn-outline-primary border-radius-3 border-width-2 px-4 font-weight-bold min-width-200 py-2 text-lh-lg mb-2">Add To Cart</a>
                                                        <a href="#" class="btn btn-outline-primary border-radius-3 border-width-2 px-4 font-weight-bold min-width-200 py-2 text-lh-lg">Book Now</a>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- start room photos and details modal -->
                                    <div :id="'#ontargetModal'+ result.room_id" class="js-modal-window-room-deals u-modal-window u-modal-window-custom container" data-modal-type="ontarget" data-open-effect="fadeIn" data-close-effect="fadeOut" data-speed="500">
                                        <div class="card rounded border-0 mx-3 mx-md-4 mx-xl-0 mb-4 mb-md-0">
                                            <div class="row no-gutters position-relative">
                                                <button type="button" class="border-0 width-50 height-50 bg-primary z-index-2 flex-content-center position-absolute rounded-circle mt-n4 mr-n4 top-0 right-0" aria-label="Close" >
                                                    <i aria-hidden="true" class="flaticon-close text-white font-size-14"></i>
                                                </button>
                                                <div class="col-xl-3 mb-4 mb-xl-0 order-1 order-xl-0">
                                                    <div class="border-bottom">
                                                        <div class="px-4 py-4">
                                                            <div class="font-weight-medium font-size-19">Room Name</div>
                                                            <div class="mt-2">
                                                                <span class="mr-1 font-size-14 text-gray-1">From</span>
                                                                <span class="font-weight-bold font-size-24">0 tk</span>
                                                                <span class="font-size-14 text-gray-1"> / night</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="pl-4 pt-4 h-100">
                                                        <div class="font-weight-medium mb-3">Facilities</div>
                                                        <div class="js-scrollbar height-570">
                                                            <!-- code here -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-9">
                                                    <p></p><br>
                                                    <div class="js-slick-carousel u-slick rounded-right height-760 overflow-hidden width-960 ml-auto"
                                                        data-slides-show="1"
                                                        data-slides-scroll="1"
                                                        data-pagi-classes="text-right justify-content-end position-absolute right-0 bottom-0 left-0 u-slick__pagination u-slick__pagination--white mb-5 mr-5"
                                                        data-arrows-classes="u-slick__arrow-classic u-slick__arrow-centered--y"
                                                        data-arrow-left-classes="fas fa-arrow-left font-size-23 bg-transparent text-white u-slick__arrow-classic-inner u-slick__arrow-classic-inner--left ml-lg-2 ml-xl-4"
                                                        data-arrow-right-classes="fas fa-arrow-right font-size-23 bg-transparent text-white u-slick__arrow-classic-inner u-slick__arrow-classic-inner--right mr-lg-2 mr-xl-4">
                                                        <!-- code here -->
                                                    </div><br>
                                                    <div class="col-xl-12">
                                                        <div>
                                                            <dl>
                                                                <h4>Room Description</h4>
                                                                <dd></dd>
                                                            </dl><br>
                                                            <br>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- end room photos and details modal -->

                                </li>
                                
                            </ul>
                            <div class="text-center text-md-left font-size-14 mb-3 text-lh-1">Showing 1–15</div>
                            <nav aria-label="Page navigation">
                                <ul class="list-pagination-1 pagination border border-color-4 rounded-sm overflow-auto overflow-xl-visible justify-content-md-center align-items-center py-2 mb-0">
                                    <li class="page-item">
                                        <a class="page-link border-right rounded-0 text-gray-5" href="#" aria-label="Previous">
                                            <i class="flaticon-left-direction-arrow font-size-10 font-weight-bold"></i>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                    </li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link font-size-14 active" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">3</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">4</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">5</a></li>
                                    <li class="page-item disabled"><a class="page-link font-size-14" href="#">...</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">66</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">67</a></li>
                                    <li class="page-item">
                                        <a class="page-link border-left rounded-0 text-gray-5" href="#" aria-label="Next">
                                            <i class="flaticon-right-thin-chevron font-size-10 font-weight-bold"></i>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>

                        <div class="tab-pane fade" id="pills-one-example1" role="tabpanel" aria-labelledby="pills-one-example1-tab" data-target-group="groups">
                            <div class="row">

                                <div v-for="result in filterDataByAttribute" class="col-md-6 col-lg-4 mb-3 mb-md-4 pb-1">
                                    <div class="card transition-3d-hover shadow-hover-2 tab-card h-100">
                                        <div class="position-relative">
                                            <a href="#" class="d-block gradient-overlay-half-bg-gradient-v5">
                                                <img class="min-height-230 bg-img-hero card-img-top" :src="result.image_url['0'].Image" alt="">
                                            </a>
                                            <div class="position-absolute top-0 right-0 pt-3 pr-3">
                                              <button type="button" class="btn btn-sm btn-icon text-white rounded-circle" data-toggle="tooltip" data-placement="top" title="" data-original-title="Save for later">
                                                <span class="flaticon-valentine-heart"></span>
                                              </button>
                                            </div>
                                            <div class="position-absolute bottom-0 left-0 right-0">
                                                <div class="px-4 pb-3">
                                                    <a :href="'/hotel/'+result.slug_name" class="d-block">
                                                        <div class="d-flex align-items-center font-size-14 text-white">
                                                            <i class="icon flaticon-pin-1 mr-2 font-size-20"></i> ${result.hotel_details.city.city_name}, ${result.hotel_details.city.state.country.country_name}
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body pl-3 pr-4 pt-2 pb-3">
                                            <div class="ml-1 mb-2">
                                                <div class="d-inline-flex align-items-center font-size-13 text-lh-1 text-primary letter-spacing-3">
                                                    <div class="green-lighter">
                                                        <small class="fas fa-star"></small>
                                                        <small class="fas fa-star"></small>
                                                        <small class="fas fa-star"></small>
                                                        <small class="fas fa-star"></small>
                                                        <small class="fas fa-star"></small>
                                                    </div>
                                                </div>
                                            </div>
                                            <a href="#" class="card-title font-size-17 font-weight-medium text-dark">${result.room_name}</a>
                                            <!-- <div class="mt-2 mb-3">
                                                <span class="badge badge-pill badge-primary py-1 px-2 font-size-14 border-radius-3 font-weight-normal">4.6/5</span>
                                                <span class="font-size-14 text-gray-1 ml-2">(166 reviews)</span>
                                            </div> -->
                                            <div class="mb-0">
                                                <span class="mr-1 font-size-14 text-gray-1"></span>
                                                <span class="font-weight-bold">${result.price_details.offer_price} TK</span><br>
                                                <span class="font-size-14 text-gray-1"> / night</span><br>
                                                <a href="#" class="btn btn-outline-primary border-radius-3 border-width-2 px-4 font-weight-bold min-width-200 py-2 text-lh-lg">Book Now</a>
                                            </div><br>
                                            <a href="#" class="btn btn-outline-primary border-radius-3 border-width-2 px-4 font-weight-bold min-width-200 py-2 text-lh-lg">Add To Card</a>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="text-center text-md-left font-size-14 mb-3 text-lh-1">Showing 1–15</div>
                            <nav aria-label="Page navigation">
                                <ul class="list-pagination-1 pagination border border-color-4 rounded-sm mb-5 mb-lg-0 overflow-auto overflow-xl-visible justify-content-md-center align-items-center py-2">
                                    <li class="page-item">
                                        <a class="page-link border-right rounded-0 text-gray-5" href="#" aria-label="Previous">
                                            <i class="flaticon-left-direction-arrow font-size-10 font-weight-bold"></i>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                    </li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link font-size-14 active" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">3</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">4</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">5</a></li>
                                    <li class="page-item disabled"><a class="page-link font-size-14" href="#">...</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">66</a></li>
                                    <li class="page-item"><a class="page-link font-size-14" href="#">67</a></li>
                                    <li class="page-item">
                                        <a class="page-link border-left rounded-0 text-gray-5" href="#" aria-label="Next">
                                            <i class="flaticon-right-thin-chevron font-size-10 font-weight-bold"></i>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <!-- End Tab Content -->
                </div>
                <!-- Slick Tab carousel -->
            </div>
        </div>
    </div>
</main>
<!-- ========== END MAIN CONTENT ========== -->
{% endblock %}

{% block custom_js %}
<script src="{% static 'frontEnd/assets/vendor/gmaps/gmaps.min.js' %}"></script>
<script src="{% static 'frontEnd/assets/vendor/ion-rangeslider/js/ion.rangeSlider.min.js' %}"></script>
<script src="{% static 'frontEnd/assets/vendor/custombox/dist/custombox.min.js' %}"></script>
<script src="{% static 'frontEnd/assets/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js' %}"></script>
<script src="{% static 'frontEnd/assets/js/components/hs.malihu-scrollbar.js' %}"></script>
<script src="{% static 'frontEnd/assets/js/components/hs.g-map.js' %}"></script>
<!-- vue js scripts start -->

<script type="text/javascript">

    new Vue({
        el: '#content',
        delimiters: ['${','}'],
        data: {
            GetAllRoomDeals: [],
            filterDataByAttribute: [],
            allCitys: [],
            allFacilities: [],
            slideIndex: 1,
            cssVal: '',
            citys: [],
            facilitiess: [],
            session_id: "{{ request.session.session_id }}",
            user_id: "{{ request.session.user_id }}",
            pro_cart_id: {{ pro_cart_id }},
            isSessionActive: false,
            isActive: {{ isActive }},
            isLogin: "{{ request.session.isLogin }}",
        },
        mounted: function() {
            this.getAllCitys();
            this.getAllFacilities();
            this.GetRoomDeals();
            this.getUserCartDetails();
            // this.showSlides(this.slideIndex);
            if(this.isLogin != ""){
                this.isLogin = JSON.parse("{{ request.session.isLogin }}".toLowerCase());
            }

            if (this.isActive == 1) {
                this.isSessionActive = true;
            }else{
                this.isSessionActive = false;
            }
        },
        methods: {
            getUserCartDetails: function(){

                if (this.user_id != 0) {
                    this.$http.get(`/api/user-cart-details/?u_id=${this.user_id}`)
                    .then((resp) => {
                        this.userCartDetails = resp.data.data;
                        // get total cart item
                        this.totalCartItemCount = resp.data.data['cart_room_data'].length + resp.data.data['cart_food_data'].length + resp.data.data['cart_facilities_data'].length + resp.data.data['cart_package_data'].length;
                    })
                    .catch((err) => {
                        console.log(err);
                    })
                } else {
                    this.$http.get(`/api/user-cart-details/?session_id=${this.session_id}`)
                    .then((resp) => {
                        this.userCartDetails = resp.data.data;
                        // get total cart item
                        this.totalCartItemCount = resp.data.data['cart_room_data'].length + resp.data.data['cart_food_data'].length + resp.data.data['cart_facilities_data'].length + resp.data.data['cart_package_data'].length;
                    })
                    .catch((err) => {
                        console.log(err);
                    })
                }

            },
            addRoomToCartDetails: function(js_cartDetails) {
                this.$http.headers.common['X-CSRFToken'] = "{{ csrf_token }}";
                this.$http.post(`/api/cart-details/`, js_cartDetails)
                    .then((resp) => {
                        
                        if (resp.data.error === false) {
                            this.check_in_time = "";
                            this.check_out_time = "";
                            iziToast.show({
                                title: 'Success!',
                                position: 'topRight',
                                timeout: 2000,
                                color: 'green',
                                message: 'Added Successfully in the Cart.',
                                messageColor: 'black'
                            });
                        }else{
                            this.check_in_time = "";
                            this.check_out_time = "";
                            iziToast.show({
                                title: 'Opppps!',
                                position: 'topRight',
                                timeout: 2000,
                                color: 'red',
                                message: 'Room Already exits in the cart.',
                                messageColor: 'black'
                            });
                        }
                        // Custombox.modal.close();
                        // refresh user cart data
                        this.getUserCartDetails();
                    })
                    .catch((err) => {
                        console.log(err);
                    })
            },

            // addToCart: function(room_id) {
            //     // validate check in and check out time field
            //     this.errors = [];
            //     if (!this.check_in_time) {
            //         this.errors.push("Please select check in time.");
            //         return false;
            //     }
            //     if (!this.check_out_time) {
            //         this.errors.push("Please select check out time.");
            //         return false;
            //     }
            //     // check user already or not
            //     if (this.user_id != 0) {
            //         var requestedData = {'session_id': `${this.session_id}`, 'user_id': `${this.user_id}`};
            //     } else {
            //         var requestedData = {'session_id': `${this.session_id}`};
            //     }

            //     let js = JSON.stringify(requestedData);

            //     if (this.isSessionActive == false) {
            //         this.$http.headers.common['X-CSRFToken'] = "{{ csrf_token }}";
            //         this.$http.post(`/api/carts/`, js)
            //             .then((resp) => {
            //                 let requestedforCardDetails = {'cart_id': `${resp.data.cart_id}`, 'room_id': `${room_id}`, 'check_in_time': `${this.check_in_time}`,'check_out_time': `${this.check_out_time}`};
            //                 let js_cartDetails = JSON.stringify(requestedforCardDetails);
            //                 this.addRoomToCartDetails(js_cartDetails);
            //                 this.isSessionActive = true;
            //                 this.pro_cart_id = resp.data.cart_id;
            //                 // set into localStorage
            //                 localStorage.setItem('cart_id', resp.data.cart_id);
            //             })
            //             .catch((err) => {
            //                 console.log(err);
            //             })
                    
            //     } else {

            //         let requestedforCardDetails = {'cart_id': `${this.pro_cart_id}`, 'room_id': `${room_id}`, 'check_in_time': `${this.check_in_time}`,'check_out_time': `${this.check_out_time}`};
            //         let js_cartDetails = JSON.stringify(requestedforCardDetails);
            //         this.addRoomToCartDetails(js_cartDetails);
            //         // set into localStorage
            //         localStorage.setItem('cart_id', this.pro_cart_id);

            //     }
            // },
            directAddToCart: function(room_id) {

                // check user already or not
                if (this.user_id != 0) {
                    var requestedData = {'session_id': `${this.session_id}`, 'user_id': `${this.user_id}`};
                } else {
                    var requestedData = {'session_id': `${this.session_id}`};
                }

                let js = JSON.stringify(requestedData);

                if (this.isSessionActive == false) {
                    this.$http.headers.common['X-CSRFToken'] = "{{ csrf_token }}";
                    this.$http.post(`/api/carts/`, js)
                        .then((resp) => {
                            let requestedforCardDetails = {'cart_id': `${resp.data.cart_id}`, 'room_id': `${room_id}`};
                            let js_cartDetails = JSON.stringify(requestedforCardDetails);
                            this.addRoomToCartDetails(js_cartDetails);
                            this.isSessionActive = true;
                            this.pro_cart_id = resp.data.cart_id;
                            // set into localstorage
                            // $cookies.set('cart_id', resp.data.cart_id);
                            localStorage.setItem('cart_id', resp.data.cart_id);
                        })
                        .catch((err) => {
                            console.log(err);
                        })
                    
                } else {

                    let requestedforCardDetails = {'cart_id': `${this.pro_cart_id}`, 'room_id': `${room_id}`};
                    let js_cartDetails = JSON.stringify(requestedforCardDetails);
                    this.addRoomToCartDetails(js_cartDetails);
                    // set into localstorage
                    // $cookies.set('cart_id', this.pro_cart_id);
                    localStorage.setItem('cart_id', this.pro_cart_id);
                }
            },
            GetRoomDeals: function(){
                this.$http.get(`/api/room-deals/`)
                .then((resp) => {
                    this.GetAllRoomDeals = resp.data.data;
                    this.filterDataByAttribute = this.GetAllRoomDeals;
                })
                .catch((err) => {
                    console.log(err);
                })
                
            },

            getAllCitys: function(){
                this.$http.get('/api/city/')
                .then((resp) => {
                    this.allCitys = resp.data;
                })
                .catch((err) => {
                    console.log(err);
                })
            },
            getAllFacilities: function(){
                this.$http.get('/api/facilites/')
                .then((resp) => {
                    this.allFacilities = resp.data.data;
                })
                .catch((err) => {
                    console.log(err);
                })
            },
            getHotelByCity: function(e){
                this.citys = [e.target.value];
                this.filterDataByAttribute = [];
                for (var i = 0; i < this.GetAllRoomDeals.length; i++) {
                    if (this.GetAllRoomDeals[i].hotel_details.city.city_name == e.target.value) {
                        this.filterDataByAttribute.push(this.GetAllRoomDeals[i]);
                    } 
                }
            },
            getHotelByPrice: function(){
                
            },
            plusSlides: function(n){
                this.showSlides(this.slideIndex += n);
            },
            currentSlide: function(n){
                this.showSlides(this.slideIndex = n);
            },
            showSlides: function(n){
                var i;
                var slides = document.getElementsByClassName("mySlides");
                if (n > slides.length) {this.slideIndex = 1}    
                if (n < 1) {this.slideIndex = slides.length}
                for (i = 0; i < slides.length; i++) {
                    slides[i].className = "isActivate";  
                }

                slides[this.slideIndex-1].className += "isDeactivate";
            }
        },
        
    });
</script>
<!-- vue js scripts end -->
{% endblock %}


